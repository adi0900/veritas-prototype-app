[0m[32mCheck[0m file:///Users/josh/veritas/veritas-prototype-app/tests/protocol/belief-epoch-processing.test.ts
[0m[38;5;245m------- pre-test output -------[0m

ðŸŽ‰ All Belief Epoch Processing tests completed!

[0m[38;5;245m----- pre-test output end -----[0m
[0m[38;5;245mrunning 9 tests from ./tests/protocol/belief-epoch-processing.test.ts[0m
Belief Epoch Processing - Complete Protocol Chain ... [0m[31mFAILED[0m [0m[38;5;245m(109ms)[0m
Belief Epoch Processing - Error on No Submissions ...
[0m[38;5;245m------- output -------[0m
Function protocol-belief-epoch-process failed: {
  error: "Belief processing failed",
  details: "No submissions found for belief e9e3b535",
  code: 500
}
âœ… No submissions error test passed
[0m[38;5;245m----- output end -----[0m
Belief Epoch Processing - Error on No Submissions ... [0m[32mok[0m [0m[38;5;245m(52ms)[0m
Belief Epoch Processing - Error on Single Participant ... [0m[31mFAILED[0m [0m[38;5;245m(19ms)[0m
Belief Epoch Processing - Weights from belief_lock ... [0m[31mFAILED[0m [0m[38;5;245m(26ms)[0m
Belief Epoch Processing - BTS Redistribution ... [0m[31mFAILED[0m [0m[38;5;245m(40ms)[0m
Belief Epoch Processing - Missing belief_id ...
[0m[38;5;245m------- output -------[0m
Function protocol-belief-epoch-process failed: { error: "belief_id is required" }
âœ… Missing belief_id error test passed
[0m[38;5;245m----- output end -----[0m
Belief Epoch Processing - Missing belief_id ... [0m[32mok[0m [0m[38;5;245m(29ms)[0m
Belief Epoch Processing - Nonexistent Belief ...
[0m[38;5;245m------- output -------[0m
Function protocol-belief-epoch-process failed: {
  error: "Belief processing failed",
  details: "Belief not found: Cannot coerce the result to a single JSON object",
  code: 500
}
âœ… Nonexistent belief error test passed
[0m[38;5;245m----- output end -----[0m
Belief Epoch Processing - Nonexistent Belief ... [0m[32mok[0m [0m[38;5;245m(15ms)[0m
Belief Epoch Processing - Zero-Sum Invariant ... [0m[31mFAILED[0m [0m[38;5;245m(16ms)[0m
Belief Epoch Processing - BD Score for Settlement ... [0m[31mFAILED[0m [0m[38;5;245m(14ms)[0m

[0m[1m[37m[41m ERRORS [0m

Belief Epoch Processing - Complete Protocol Chain [0m[38;5;245m=> ./tests/protocol/belief-epoch-processing.test.ts:219:6[0m
[0m[1m[31merror[0m: Error: Failed to create post: insert or update on table "posts" violates foreign key constraint "posts_user_id_fkey"
  if (postError) throw new Error(`Failed to create post: ${postError.message}`);
[0m[31m                       ^[0m
    at [0m[1m[3mcreatePoolDeployment[0m ([0m[36mfile:///Users/josh/veritas/veritas-prototype-app/tests/protocol/belief-epoch-processing.test.ts[0m:[0m[33m177[0m:[0m[33m24[0m)
    at [0m[1m[3meventLoopTick[0m ([0m[36mext:core/01_core.js[0m:[0m[33m179[0m:[0m[33m7[0m)
    at async [0m[36mfile:///Users/josh/veritas/veritas-prototype-app/tests/protocol/belief-epoch-processing.test.ts[0m:[0m[33m229[0m:[0m[33m3[0m

Belief Epoch Processing - Error on Single Participant [0m[38;5;245m=> ./tests/protocol/belief-epoch-processing.test.ts:338:6[0m
[0m[1m[31merror[0m: Error: Failed to create post: insert or update on table "posts" violates foreign key constraint "posts_user_id_fkey"
  if (postError) throw new Error(`Failed to create post: ${postError.message}`);
[0m[31m                       ^[0m
    at [0m[1m[3mcreatePoolDeployment[0m ([0m[36mfile:///Users/josh/veritas/veritas-prototype-app/tests/protocol/belief-epoch-processing.test.ts[0m:[0m[33m177[0m:[0m[33m24[0m)
    at [0m[1m[3meventLoopTick[0m ([0m[36mext:core/01_core.js[0m:[0m[33m179[0m:[0m[33m7[0m)
    at async [0m[36mfile:///Users/josh/veritas/veritas-prototype-app/tests/protocol/belief-epoch-processing.test.ts[0m:[0m[33m344[0m:[0m[33m3[0m

Belief Epoch Processing - Weights from belief_lock [0m[38;5;245m=> ./tests/protocol/belief-epoch-processing.test.ts:383:6[0m
[0m[1m[31merror[0m: Error: Failed to create post: insert or update on table "posts" violates foreign key constraint "posts_user_id_fkey"
  if (postError) throw new Error(`Failed to create post: ${postError.message}`);
[0m[31m                       ^[0m
    at [0m[1m[3mcreatePoolDeployment[0m ([0m[36mfile:///Users/josh/veritas/veritas-prototype-app/tests/protocol/belief-epoch-processing.test.ts[0m:[0m[33m177[0m:[0m[33m24[0m)
    at [0m[1m[3meventLoopTick[0m ([0m[36mext:core/01_core.js[0m:[0m[33m179[0m:[0m[33m7[0m)
    at async [0m[36mfile:///Users/josh/veritas/veritas-prototype-app/tests/protocol/belief-epoch-processing.test.ts[0m:[0m[33m390[0m:[0m[33m3[0m

Belief Epoch Processing - BTS Redistribution [0m[38;5;245m=> ./tests/protocol/belief-epoch-processing.test.ts:446:6[0m
[0m[1m[31merror[0m: Error: Failed to create post: insert or update on table "posts" violates foreign key constraint "posts_user_id_fkey"
  if (postError) throw new Error(`Failed to create post: ${postError.message}`);
[0m[31m                       ^[0m
    at [0m[1m[3mcreatePoolDeployment[0m ([0m[36mfile:///Users/josh/veritas/veritas-prototype-app/tests/protocol/belief-epoch-processing.test.ts[0m:[0m[33m177[0m:[0m[33m24[0m)
    at [0m[1m[3meventLoopTick[0m ([0m[36mext:core/01_core.js[0m:[0m[33m179[0m:[0m[33m7[0m)
    at async [0m[36mfile:///Users/josh/veritas/veritas-prototype-app/tests/protocol/belief-epoch-processing.test.ts[0m:[0m[33m452[0m:[0m[33m3[0m

Belief Epoch Processing - Zero-Sum Invariant [0m[38;5;245m=> ./tests/protocol/belief-epoch-processing.test.ts:549:6[0m
[0m[1m[31merror[0m: Error: Failed to create post: insert or update on table "posts" violates foreign key constraint "posts_user_id_fkey"
  if (postError) throw new Error(`Failed to create post: ${postError.message}`);
[0m[31m                       ^[0m
    at [0m[1m[3mcreatePoolDeployment[0m ([0m[36mfile:///Users/josh/veritas/veritas-prototype-app/tests/protocol/belief-epoch-processing.test.ts[0m:[0m[33m177[0m:[0m[33m24[0m)
    at [0m[1m[3meventLoopTick[0m ([0m[36mext:core/01_core.js[0m:[0m[33m179[0m:[0m[33m7[0m)
    at async [0m[36mfile:///Users/josh/veritas/veritas-prototype-app/tests/protocol/belief-epoch-processing.test.ts[0m:[0m[33m558[0m:[0m[33m3[0m

Belief Epoch Processing - BD Score for Settlement [0m[38;5;245m=> ./tests/protocol/belief-epoch-processing.test.ts:629:6[0m
[0m[1m[31merror[0m: Error: Failed to create post: insert or update on table "posts" violates foreign key constraint "posts_user_id_fkey"
  if (postError) throw new Error(`Failed to create post: ${postError.message}`);
[0m[31m                       ^[0m
    at [0m[1m[3mcreatePoolDeployment[0m ([0m[36mfile:///Users/josh/veritas/veritas-prototype-app/tests/protocol/belief-epoch-processing.test.ts[0m:[0m[33m177[0m:[0m[33m24[0m)
    at [0m[1m[3meventLoopTick[0m ([0m[36mext:core/01_core.js[0m:[0m[33m179[0m:[0m[33m7[0m)
    at async [0m[36mfile:///Users/josh/veritas/veritas-prototype-app/tests/protocol/belief-epoch-processing.test.ts[0m:[0m[33m637[0m:[0m[33m3[0m

[0m[1m[37m[41m FAILURES [0m

Belief Epoch Processing - Complete Protocol Chain [0m[38;5;245m=> ./tests/protocol/belief-epoch-processing.test.ts:219:6[0m
Belief Epoch Processing - Error on Single Participant [0m[38;5;245m=> ./tests/protocol/belief-epoch-processing.test.ts:338:6[0m
Belief Epoch Processing - Weights from belief_lock [0m[38;5;245m=> ./tests/protocol/belief-epoch-processing.test.ts:383:6[0m
Belief Epoch Processing - BTS Redistribution [0m[38;5;245m=> ./tests/protocol/belief-epoch-processing.test.ts:446:6[0m
Belief Epoch Processing - Zero-Sum Invariant [0m[38;5;245m=> ./tests/protocol/belief-epoch-processing.test.ts:549:6[0m
Belief Epoch Processing - BD Score for Settlement [0m[38;5;245m=> ./tests/protocol/belief-epoch-processing.test.ts:629:6[0m

[0m[31mFAILED[0m | 3 passed | 6 failed [0m[38;5;245m(330ms)[0m

[0m[1m[31merror[0m: Test failed
